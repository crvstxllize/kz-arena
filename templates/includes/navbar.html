{% load user_groups %}
<header class="site-header" id="site-header">
  <div class="container header-inner">
    <a href="{% url 'core:home' %}" class="brand">KZ Arena</a>

    <button
      id="nav-toggle"
      class="nav-toggle"
      type="button"
      aria-controls="nav-menu"
      aria-expanded="false"
      aria-label="Открыть меню"
    >
      <span class="nav-toggle__label">Меню</span>
      <span class="nav-toggle__icon" aria-hidden="true">
        <span></span>
        <span></span>
        <span></span>
      </span>
    </button>

    <nav class="site-nav" aria-label="Основная навигация">
      <ul id="nav-menu" class="nav-menu">
        <li><a href="{% url 'core:home' %}" class="{% if request.resolver_match.namespace == 'core' and request.resolver_match.url_name == 'home' %}is-active{% endif %}">Главная</a></li>
        <li><a href="{% url 'articles:news_list' %}" class="{% if request.resolver_match.namespace == 'articles' %}is-active{% endif %}">Новости</a></li>
        <li><a href="{% url 'teams:team_list' %}" class="{% if request.resolver_match.namespace == 'teams' %}is-active{% endif %}">Команды</a></li>
        <li><a href="{% url 'tournaments:tournament_list' %}" class="{% if request.resolver_match.namespace == 'tournaments' %}is-active{% endif %}">Турниры</a></li>
        <li><a href="{% url 'matches:match_list' %}" class="{% if request.resolver_match.namespace == 'matches' %}is-active{% endif %}">Матчи</a></li>
        <li><a href="{% url 'core:about' %}" class="{% if request.resolver_match.namespace == 'core' and request.resolver_match.url_name == 'about' %}is-active{% endif %}">О проекте</a></li>

        {% if user.is_authenticated %}
          {% if user.is_staff or user|has_group:'Editors' %}
          <li><a href="{% url 'dashboard:index' %}" class="{% if request.resolver_match.namespace == 'dashboard' %}is-active{% endif %}">Dashboard</a></li>
          {% endif %}
        {% endif %}

        {% if user.is_authenticated %}
          <li><a href="{% url 'accounts:profile' %}" class="{% if request.resolver_match.namespace == 'accounts' and request.resolver_match.url_name == 'profile' %}is-active{% endif %}">Профиль</a></li>
          <li>
            <form method="post" action="{% url 'accounts:logout' %}" class="nav-logout-form">
              {% csrf_token %}
              <input type="hidden" name="next" value="{% url 'core:home' %}">
              <button type="submit" class="nav-logout-button">Выйти</button>
            </form>
          </li>
        {% else %}
          <li><a href="{% url 'accounts:login' %}" class="{% if request.resolver_match.namespace == 'accounts' and request.resolver_match.url_name == 'login' %}is-active{% endif %}">Войти</a></li>
          <li><a href="{% url 'accounts:register' %}" class="{% if request.resolver_match.namespace == 'accounts' and request.resolver_match.url_name == 'register' %}is-active{% endif %}">Регистрация</a></li>
        {% endif %}

        <li class="theme-toggle-item">
          <button
            type="button"
            id="theme-toggle"
            class="theme-toggle"
            role="switch"
            aria-checked="true"
            aria-label="Переключить на светлую тему"
            title="Сменить тему"
          >
            <span class="theme-toggle__icon theme-toggle__icon--sun" aria-hidden="true">
              <svg viewBox="0 0 24 24" focusable="false">
                <path d="M12 4a1 1 0 0 1 1 1v1.2a1 1 0 1 1-2 0V5a1 1 0 0 1 1-1Zm0 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8Zm8-5a1 1 0 1 1 0 2h-1.2a1 1 0 1 1 0-2H20ZM6.2 12a1 1 0 1 1 0 2H5a1 1 0 1 1 0-2h1.2Zm10.04 4.42a1 1 0 0 1 1.42 0l.85.85a1 1 0 0 1-1.41 1.41l-.86-.85a1 1 0 0 1 0-1.41ZM7.76 7.76a1 1 0 0 1 1.41 0l.85.86a1 1 0 0 1-1.41 1.41l-.85-.86a1 1 0 0 1 0-1.41Zm10.75-.3a1 1 0 0 1 0 1.41l-.85.86a1 1 0 1 1-1.42-1.41l.86-.86a1 1 0 0 1 1.41 0ZM9.17 16.83a1 1 0 0 1 0 1.41l-.85.85a1 1 0 1 1-1.42-1.41l.86-.85a1 1 0 0 1 1.41 0Z"/>
              </svg>
            </span>
            <span class="theme-toggle__track" aria-hidden="true">
              <span class="theme-toggle__thumb"></span>
            </span>
            <span class="theme-toggle__icon theme-toggle__icon--moon" aria-hidden="true">
              <svg viewBox="0 0 24 24" focusable="false">
                <path d="M14.5 2.5a1 1 0 0 1 .45 1.9 8 8 0 1 0 4.6 10.15 1 1 0 0 1 1.9.63A10 10 0 1 1 13.87 2.7a1 1 0 0 1 .63-.2Z"/>
              </svg>
            </span>
          </button>
        </li>
      </ul>
    </nav>
  </div>
  <div id="nav-overlay" class="nav-overlay" hidden></div>
</header>
