{% load user_groups %}
<header class="site-header" id="site-header">
  <div class="container header-inner">
    <a href="{% url 'core:home' %}" class="brand">KZ Arena</a>

    <button
      id="nav-toggle"
      class="nav-toggle"
      type="button"
      aria-controls="nav-menu"
      aria-expanded="false"
    >
      Меню
    </button>

    <nav aria-label="Основная навигация">
      <ul id="nav-menu" class="nav-menu">
        <li><a href="{% url 'core:home' %}" class="{% if request.resolver_match.namespace == 'core' and request.resolver_match.url_name == 'home' %}is-active{% endif %}">Главная</a></li>
        <li><a href="{% url 'articles:news_list' %}" class="{% if request.resolver_match.namespace == 'articles' %}is-active{% endif %}">Новости</a></li>
        <li><a href="{% url 'teams:team_list' %}" class="{% if request.resolver_match.namespace == 'teams' %}is-active{% endif %}">Команды</a></li>
        <li><a href="{% url 'tournaments:tournament_list' %}" class="{% if request.resolver_match.namespace == 'tournaments' %}is-active{% endif %}">Турниры</a></li>
        <li><a href="{% url 'matches:match_list' %}" class="{% if request.resolver_match.namespace == 'matches' %}is-active{% endif %}">Матчи</a></li>
        <li><a href="{% url 'core:about' %}" class="{% if request.resolver_match.namespace == 'core' and request.resolver_match.url_name == 'about' %}is-active{% endif %}">О проекте</a></li>

        {% if user.is_authenticated %}
          {% if user.is_staff or user|has_group:'Editors' %}
          <li><a href="{% url 'dashboard:index' %}" class="{% if request.resolver_match.namespace == 'dashboard' %}is-active{% endif %}">Dashboard</a></li>
          {% endif %}
        {% endif %}

        <li>
          <button type="button" id="theme-toggle" class="nav-theme-button" aria-pressed="false">Тема</button>
        </li>

        {% if user.is_authenticated %}
          <li><a href="{% url 'accounts:profile' %}" class="{% if request.resolver_match.namespace == 'accounts' and request.resolver_match.url_name == 'profile' %}is-active{% endif %}">Профиль</a></li>
          <li>
            <form method="post" action="{% url 'accounts:logout' %}" class="nav-logout-form">
              {% csrf_token %}
              <input type="hidden" name="next" value="{% url 'core:home' %}">
              <button type="submit" class="nav-logout-button">Выйти</button>
            </form>
          </li>
        {% else %}
          <li><a href="{% url 'accounts:login' %}" class="{% if request.resolver_match.namespace == 'accounts' and request.resolver_match.url_name == 'login' %}is-active{% endif %}">Войти</a></li>
          <li><a href="{% url 'accounts:register' %}" class="{% if request.resolver_match.namespace == 'accounts' and request.resolver_match.url_name == 'register' %}is-active{% endif %}">Регистрация</a></li>
        {% endif %}
      </ul>
    </nav>
  </div>
</header>
