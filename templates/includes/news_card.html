{% load news_media %}
<article class="news-card{% if card_variant %} news-card--{{ card_variant }}{% endif %}" data-kind="{{ item.kind|default:'sport' }}" data-discipline="{{ item.discipline|default:'' }}">
  <a href="{{ item.get_absolute_url }}" class="news-card__media-link" aria-label="Открыть новость: {{ item.title }}">
    <img
      src="{{ item|news_image }}"
      data-fallback-src="{{ item|news_placeholder }}"
      onerror="this.onerror=null;this.src=this.dataset.fallbackSrc;"
      alt="{{ item.title }}"
      class="news-card__image"
      loading="lazy"
    >
  </a>

  <div class="news-card__body">
    <div class="news-card__meta">
      <span class="news-pill">{{ item.get_kind_display }}</span>
      {% if item.discipline %}<span class="news-pill">{{ item.get_discipline_display }}</span>{% endif %}
      {% if item.is_featured %}<span class="news-pill news-pill--urgent">Главное</span>{% endif %}
      {% if item.published_at %}
        <time datetime="{{ item.published_at|date:'c' }}">{{ item.published_at|date:"d.m.Y H:i" }}</time>
      {% endif %}
    </div>

    <h3 class="news-card__title">
      <a href="{{ item.get_absolute_url }}">{{ item.title }}</a>
    </h3>

    <p class="news-card__excerpt">
      {% if item.excerpt %}
        {{ item.excerpt }}
      {% else %}
        {{ item.content|truncatechars:140 }}
      {% endif %}
    </p>

    <a href="{{ item.get_absolute_url }}" class="news-card__read-more" aria-label="Читать новость: {{ item.title }}">Читать</a>
  </div>
</article>
