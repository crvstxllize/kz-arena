{% extends "base.html" %}

{% block content %}
<section class="section">
  <h1>{{ tournament.name }}</h1>
  <p class="news-card__meta">
    <span class="news-pill">{{ tournament.get_kind_display }}</span>
    {% if tournament.discipline %}<span class="news-pill">{{ tournament.get_discipline_display }}</span>{% endif %}
    <span>{{ tournament.start_date|date:"d.m.Y" }} - {{ tournament.end_date|date:"d.m.Y" }}</span>
    {% if tournament.location %}<span>{{ tournament.location }}</span>{% endif %}
  </p>
</section>

<section class="section">
  <div class="section-head"><h2 class="section-title">Матчи турнира</h2></div>
  {% if matches %}
    <div class="match-table-wrap">
      <table class="match-table">
        <thead>
          <tr><th>Дата</th><th>Матч</th><th>Статус</th><th>Счёт</th></tr>
        </thead>
        <tbody>
          {% for match in matches %}
            <tr>
              <td>{{ match.datetime|date:"d.m.Y H:i" }}</td>
              <td><a href="{% url 'matches:match_detail' match.id %}">{{ match.team_a.name }} vs {{ match.team_b.name }}</a></td>
              <td>{{ match.get_status_display }}</td>
              <td>
                {% if match.result %}
                  {{ match.result.score_a }} : {{ match.result.score_b }}
                {% else %}
                  -
                {% endif %}
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  {% else %}
    <p class="muted">Данные отсутствуют.</p>
  {% endif %}
</section>

<section class="section section-all-news">
  <div class="section-head"><h2 class="section-title">Статьи по дисциплине</h2></div>
  {% if related_articles %}
    <div class="news-grid news-grid--portal">
      {% for item in related_articles %}
        {% include "includes/news_card.html" with item=item card_variant="compact" %}
      {% endfor %}
    </div>
  {% else %}
    <p class="muted">Данные отсутствуют.</p>
  {% endif %}
</section>
{% endblock %}
