{% extends "base.html" %}
{% load static %}

{% block content %}
<section class="section section-filters" aria-label="Фильтры матчей">
  <h1>Матч-центр</h1>
  <p>Ближайшие встречи, live-статусы и результаты матчей KZ Arena из базы данных проекта.</p>
  <div class="message message--warning tournament-notice" role="status">
    Раздел работает в тестовом режиме и скоро вступит в действие.
  </div>

  <form method="get" class="news-filters tournament-filters match-center-filters" aria-label="Фильтры матчей">
    <div class="filter-group matches-filters__chips" role="radiogroup" aria-label="Тип матчей">
      <label class="filter-chip {% if not current_filters.category %}is-active{% endif %}"><input type="radio" name="category" value="" {% if not current_filters.category %}checked{% endif %}>Все</label>
      <label class="filter-chip {% if current_filters.category == 'sport' %}is-active{% endif %}"><input type="radio" name="category" value="sport" {% if current_filters.category == 'sport' %}checked{% endif %}>Спорт</label>
      <label class="filter-chip {% if current_filters.category == 'esport' %}is-active{% endif %}"><input type="radio" name="category" value="esport" {% if current_filters.category == 'esport' %}checked{% endif %}>Киберспорт</label>
    </div>

    <div class="filter-group filter-group--selects match-center-filters__grid">
      <div class="filter-field">
        <label class="filter-label" for="discipline">Дисциплина</label>
        <select class="filter-select" id="discipline" name="discipline">
          <option value="">Все</option>
          {% for value, label in discipline_choices %}
            <option value="{{ value }}" {% if current_filters.discipline == value %}selected{% endif %}>{{ label }}</option>
          {% endfor %}
        </select>
      </div>

      <div class="filter-field">
        <label class="filter-label" for="status">Статус</label>
        <select class="filter-select" id="status" name="status">
          <option value="">Все</option>
          {% for value, label in status_choices %}
            <option value="{{ value }}" {% if current_filters.status == value %}selected{% endif %}>{{ label }}</option>
          {% endfor %}
        </select>
      </div>

      <div class="filter-actions matches-filters__actions">
        <button type="submit" class="button button--small">Применить</button>
        <a href="{% url 'matches:match_list' %}" class="button button--secondary button--small">Сбросить</a>
      </div>
    </div>
  </form>
</section>

<section class="matches-groups">
  {% if page_obj.object_list %}
    {% if live_matches %}
    <article class="section matches-group">
      <h2 class="matches-group__title">Сейчас</h2>
      <div class="matches-list">
        {% for match in live_matches %}
          {% include "tournaments/partials/match_card.html" with match=match %}
        {% endfor %}
      </div>
    </article>
    {% endif %}

    {% if upcoming_matches %}
    <article class="section matches-group">
      <h2 class="matches-group__title">Ближайшие</h2>
      <div class="matches-list">
        {% for match in upcoming_matches %}
          {% include "tournaments/partials/match_card.html" with match=match %}
        {% endfor %}
      </div>
    </article>
    {% endif %}

    {% if finished_matches %}
    <article class="section matches-group">
      <h2 class="matches-group__title">Завершенные</h2>
      <div class="matches-list">
        {% for match in finished_matches %}
          {% include "tournaments/partials/match_card.html" with match=match %}
        {% endfor %}
      </div>
    </article>
    {% endif %}

  {% else %}
    <section class="section">
      <p class="muted">Данные отсутствуют.</p>
    </section>
  {% endif %}
</section>
{% endblock %}
