{% extends "base.html" %}

{% block content %}
<section class="section">
  <h1>{{ match.team_a.name }} vs {{ match.team_b.name }}</h1>

  <p class="news-card__meta">
    <span class="news-pill">{{ match.tournament.get_kind_display }}</span>
    {% if match.tournament.discipline %}<span class="news-pill">{{ match.tournament.get_discipline_display }}</span>{% endif %}
    <span>{{ match.datetime|date:"d.m.Y H:i" }}</span>
    <span>{{ match.get_status_display }}</span>
  </p>

  <p>
    Турнир:
    <a href="{% url 'tournaments:tournament_detail' match.tournament.slug %}">{{ match.tournament.name }}</a>
  </p>

  <div class="match-score-box">
    {% if match.result %}
      <p class="match-score">{{ match.team_a.name }} <strong>{{ match.result.score_a }} : {{ match.result.score_b }}</strong> {{ match.team_b.name }}</p>
      {% if match.result.winner %}<p class="muted">Победитель: {{ match.result.winner.name }}</p>{% endif %}
    {% else %}
      <p class="muted">Матч ещё не завершён.</p>
    {% endif %}
  </div>
</section>

<section class="section section-all-news">
  <div class="section-head"><h2 class="section-title">Статьи по дисциплине</h2></div>
  {% if related_articles %}
    <div class="news-grid news-grid--portal">
      {% for item in related_articles %}
        {% include "includes/news_card.html" with item=item card_variant="compact" %}
      {% endfor %}
    </div>
  {% else %}
    <p class="muted">Данные отсутствуют.</p>
  {% endif %}
</section>
{% endblock %}
